<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Enfusion Script API: RplNode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Enfusion Script API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="interfaceRplNode.html">RplNode</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#NodeRole">Role in replication</a></li>
<li class="level1"><a href="#NodeContents">Node contents</a></li>
<li class="level1"><a href="#NodeTypes">Types of nodes</a></li>
<li class="level1"><a href="#NodeLifetime">Node Lifetime</a><ul><li class="level2"><a href="#NodeCreation">Creation</a><ul><li class="level3"><a href="#LoadingPhase">Loading phase</a></li>
<li class="level3"><a href="#RuntimePhase">Runtime phase</a></li>
</ul>
</li>
<li class="level2"><a href="#NodeRuntime">Runtime</a></li>
<li class="level2"><a href="#NodeDestruction">Destruction</a></li>
</ul>
</li>
<li class="level1"><a href="#HowTo">How to</a></li>
</ul>
</div>
<div class="textblock"><p><b>Immutable</b> collection of replicated items.</p>
<dl class="section warning"><dt>Warning</dt><dd>Work in Progress!</dd></dl>
<h1><a class="anchor" id="NodeRole"></a>
Role in replication</h1>
<p>Nodes describe the relations of singular Items within the system. They represent a single immutable structure that shares the lifetime properties, creation and initialization process.</p>
<p>You can think of them as a collection of entities and their components contained in a prefab instance. Those were designed to work together and probably to be spawned and destroyed at the same time.</p>
<h1><a class="anchor" id="NodeContents"></a>
Node contents</h1>
<p>The node itself is just an array of structures. You can fill it with your items as you see fit with one exception. The first inserted item had to be the <b>Head</b> item. This special item has to implement replication lifetime specific callbacks. These are for example able to recreate the contents of this node, destroy him, move him within the hierarchy of other nodes, save and load initialization data.</p>
<h1><a class="anchor" id="NodeTypes"></a>
Types of nodes</h1>
<p>There are generally three types of nodes reflecting the environment from which they were registered. Each of them will receive a different type of <a class="el" href="interfaceRplId.html" title="Replication item identifier.">RplId</a>.</p>
<ol type="1">
<li><b>Loadtime</b><ul>
<li>The node will be present on both server and clients after the world file gets loaded.</li>
<li><em>Note: These kinds of nodes don't have to implement a callbacks which are "streaming"(creating) them on clients.</em></li>
</ul>
</li>
<li><b>Runtime</b><ul>
<li>Those will be always created on the fly on server. He will distribute them to clients on demand.</li>
</ul>
</li>
<li><b>Local</b><ul>
<li>Those will be created on the fly during runtime on the client.</li>
<li>They would not be streamed to server and cannot influence the experience of other clients.</li>
<li>Effectively just local effects which still share the capabilities of replicated objects (<em>really cool tool to de-duplicate your code</em>).</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="NodeLifetime"></a>
Node Lifetime</h1>
<h2><a class="anchor" id="NodeCreation"></a>
Creation</h2>
<ol type="1">
<li>Allocate your node (his memory is owned by the user).</li>
<li>Insert the <b>Head</b> item.</li>
<li>Insert the rest of your items.</li>
<li>Register your node into the replication.</li>
</ol>
<p>This is a really straight forward process but there is one caveat. You always have to be aware of when you are registering your node. In general there are only two phases influencing the registration process.</p>
<h3><a class="anchor" id="LoadingPhase"></a>
Loading phase</h3>
<ul>
<li>Your nodes will be treated as <b>Static</b> by default. You have to account for that otherwise you will be greeted with a replication error telling you that you broke the loading table consistency.</li>
<li>If you know that your node is getting registered in load time and you know that it won't be spawned on clients you can override the registration logic and tell the system to register it as <b>Dynamic</b> node instead.</li>
</ul>
<h3><a class="anchor" id="RuntimePhase"></a>
Runtime phase</h3>
<ul>
<li>Everything registered in this phase will be treated as <b>Dynamic</b> by default on server and <b>Local</b> by default on clients. Trying to override this is most probably pointless and just would not work.</li>
</ul>
<h2><a class="anchor" id="NodeRuntime"></a>
Runtime</h2>
<p>The node will get assigned some <b>meta information</b> right after it is created. Those are related to <b>ownership</b> and <b>role</b>. You can use these right from the start to build your logic around them. All of the contained Items will get an <a class="el" href="interfaceRplId.html" title="Replication item identifier.">RplId</a> assigned after the node gets registered. This is a unique identifier synchronized across the network.</p>
<p>During runtime the node along with the <b>Head</b> item serves as your access point to the replication related data and its features.</p>
<p>When this nodes becomes relevant to a client then a procedure called <b>Node Streaming</b> will be initiated. There will be whole chapter on this topic.</p>
<h2><a class="anchor" id="NodeDestruction"></a>
Destruction</h2>
<p>Once you know that the items in the node are getting deleted you should unregister the node from replication first. Otherwise there would be a whole lot of nasty crashes happening. You can free the items and eventually your node. Outgoing communication from your items would be properly finalized and destruction will be replicated to your items.</p>
<h1><a class="anchor" id="HowTo"></a>
How to</h1>
<p>The nodes are really straight forward to use on their own. The most common use case would be the <a class="el" href="interfaceBaseRplComponent.html">BaseRplComponent</a> which combines both, the <b><a class="el" href="interfaceRplNode.html">RplNode</a></b> with <b>Head</b> item all together. Or the <b>Connection</b> which is not part of the entity component structure. Note that your logic does not have to be written in entities and components in order to use the replication and <b>RplNodes</b> you are completely free to structure your code however you like. The only limitation is that your items have to inherit from the <b>BaseItem</b> and properly use the related macros. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
